{% load static %}
<html>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link
    href="https://fonts.googleapis.com/css?family=Raleway"
    rel="stylesheet"
  />
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      background-color: #f1f1f1;
    }

    #regForm {
      background-color: #ffffff;
      margin: 100px auto;
      font-family: Raleway;
      padding: 40px;
      width: 70%;
      min-width: 300px;
    }

    h1 {
      text-align: center;
    }

    input {
      padding: 10px;
      width: 100%;
      font-size: 17px;
      font-family: Raleway;
      border: 1px solid #aaaaaa;
    }

    /* Mark input boxes that gets an error on validation: */
    input.invalid {
      background-color: #ffdddd;
    }

    /* Hide all steps by default: */
    .tab {
      display: none;
    }

    button {
      background-color: #04aa6d;
      color: #ffffff;
      border: none;
      padding: 10px 20px;
      font-size: 17px;
      font-family: Raleway;
      cursor: pointer;
    }

    button:hover {
      opacity: 0.8;
    }

    #prevBtn {
      background-color: #bbbbbb;
    }

    /* Make circles that indicate the steps of the form: */
    .step {
      height: 15px;
      width: 15px;
      margin: 0 2px;
      background-color: #bbbbbb;
      border: none;
      border-radius: 50%;
      display: inline-block;
      opacity: 0.5;
    }

    .step.active {
      opacity: 1;
    }

    /* Mark the steps that are finished and valid: */
    .step.finish {
      background-color: #04aa6d;
    }
  </style>
  <script src="{% static "jquery-1.8.2.js" %}"></script>
    <script src="{% static "mfs100-9.0.2.6.js" %}"></script>  
  <link rel="stylesheet" href= "{% static "assets.main/bootstrap/css/bootstrap.min.css "%}" />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"
  />
  <link
    rel="stylesheet"
    href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic,900,900italic"
  />
  <link rel="stylesheet" href="{% static "assets.main/fonts/fontawesome-all.min.css "%}" /> <link rel="stylesheet"
  href="{% static "assets.main/fonts/font-awesome.min.css "%}" /> <link
  rel="stylesheet" href="{% static "assets.main/fonts/ionicons.min.css "%}" />
  <link rel="stylesheet" href="{% static  "assets.main/fonts/fontawesome5-overrides.min.css "%}" /> <link
  rel="stylesheet" href="{% static "assets.main/css/Effective-Pricing-Cards.css "%}" />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css "
  />
  <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/baguettebox.js/1.10.0/baguetteBox.min.css "
  />
  <link rel="stylesheet" href="{% static "assets.main/css/Login-Form-Clean.css "%} "/> 
  <link rel="stylesheet" href="{% static "assets.main/css/Off-Canvas-Sidebar-Drawer-Navbar.css "%}"/>
  <link rel="stylesheet" href="{% static "assets.main/css/finger.css "%}" />
  <body>
    <nav class="navbar navbar-dark bg-primary" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="#page-top">aadher </a
      ><button
        data-bs-toggle="collapse"
        data-bs-target="#navbarResponsive"
        class="navbar-toggler navbar-toggler-right"
        type="button"
        aria-controls="navbarResponsive"
        aria-expanded="false"
        aria-label="Toggle navigation"
      >
        <i class="fa fa-align-justify"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item">
            <a class="nav-link" href="#about">About</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="admition/adformogin.html">aDmation</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="scoller/scollershipform.html"
              >scolllership</a
            >
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>
   {% if messages %}
    <ul class="messages">
    {% for message in messages %}
    <p style="color:red">{{ message }}</p>
    {% endfor %}
</ul>
{% endif %}
    <form id="regForm" method="POST">
      {% csrf_token %}
      <h1>General Infomation</h1>
      <div class="tab">
        <p>
          <input
            placeholder="First name"
            oninput="this.className = ''"
            name="fname"
          />
        </p>
        <p>
          <input
            type="text"
            placeholder="Last name"
            oninput="this.className = ''"
            class="form-control form-control-lg"
            name="lname"
            required
          />
        </p>
        <p>
          <input
            type="text"
            placeholder="Fathername"
            oninput="this.className = ''"
            class="form-control form-control-lg"
            name="Fathername"
            required
          />
        </p>
        <p>
          <input
            type="text"
            id="form3Examplev4"
            placeholder="Mothername"
            oninput="this.className = ''"
            class="form-control form-control-lg"
            name="Mothername"
            required
          />
        </p>
        Contact Details:
        <p>
          <input
            placeholder="Address"
            type="text"
            id="form3Examplea2"
            class="form-control form-control-lg"
            name="Address"
            requried
          />
        </p>
        <p>
          <input
            placeholder="pincode"
            type="number"
            name="pincode"
            id="form3Examplea4"
            class="form-control form-control-lg"
            required
          />
        </p>
        <p>
          <input
            placeholder="Mobile number"
            type="number"
            name="Phone"
            id="form3Examplea8"
            class="form-control form-control-lg"
            required
          />
        </p>
        <p>
          <input
            placeholder="Email"
            type="email"
            name="email"
            id="form3Examplea9"
            class="form-control form-control-lg"
            required
          />
        </p>
      </div>
      <div class="tab">
        Date of Birth
        <p>
          <input type="date" name="dob" id="form" required />
        </p>
      </div>
      <div class="tab">
        <div class="fingerprint">
          <img
            id="imgFinger"
            name="imgFinger"
            width="145px"
            height="188px"
            alt="Finger Image"
            required
          />
          <div class ='imgf'> <input id="imgFinger1" type="hidden"  name="imgFinger1" required /> </div>
          <div class ='imgf1'> <input id="imgFinger2" type="hidden"  name="imgFinger2" required /> </div>
          <div class ='imgf2'> <input id="imgFinger3" type="hidden"  name="imgFinger3" required /> </div>
          <div class ='imgf3'> <input id="imgFinger4" type="hidden"  name="imgFinger4" required /> </div>
          <div class ='imgf4'> <input id="imgFinger5" type="hidden"  name="imgFinger5" required /> </div>
          <div style='margin-top: 40px'></div>
            <button type='button'  id="btnCapture"  name=' Capture' class="btn btn-primary " onclick="Capture();"  >Capture</button>

        </div>
      </div>
      <div style="margin-top:10%">
        <div style="float: right">
          <button type="button" id="prevBtn" onclick="nextPrev(-1)">
            Previous
          </button>
          <button type="button" id="nextBtn" onclick="nextPrev(1)">Next</button>
          <button type="submit" id="nextBtn1"  hidden="true">submit </button>
        </div>
      </div>
     
      <!-- Circles which indicates the steps of the form: -->
      <div style="text-align: center; margin-top: 90px">
        <span class="step"></span>
        <span class="step"></span>
        <span class="step"></span>
      </div>
    </form>

    <script>
      var currentTab = 0; // Current tab is set to be the first tab (0)
      showTab(currentTab); // Display the current tab

      function showTab(n) {
        // This function will display the specified tab of the form...
        var x = document.getElementsByClassName("tab");
        x[n].style.display = "block";
        //... and fix the Previous/Next buttons:
        if (n == 0) {
          document.getElementById("prevBtn").style.display = "none";
        } else {
          document.getElementById("prevBtn").style.display = "inline";
        }
        if (n == x.length - 1) {
          document.getElementById("nextBtn").hidden=true;
          document.getElementById("nextBtn1").hidden=false;
      
        }
        else {
          document.getElementById("nextBtn").innerHTML = "Next";
        }
        //... and run a function that will display the correct step indicator:
        fixStepIndicator(n);
      }

      function nextPrev(n) {
        // This function will figure out which tab to display
        var x = document.getElementsByClassName("tab");
        // Exit the function if any field in the current tab is invalid:
        if (n == 1 && !validateForm()) return false;
        // Hide the current tab:
        x[currentTab].style.display = "none";
        // Increase or decrease the current tab by 1:
        currentTab = currentTab + n;
        // if you have reached the end of the form...
        if (currentTab >= x.length) {
          // ... the form gets submitted:
          document.getElementById('nextBtn').type="submit";
          return false;
        }
        // Otherwise, display the correct tab:
        showTab(currentTab);
      }

      function validateForm() {
        // This function deals with validation of the form fields
        var x,
          y,
          i,
          valid = true;
        x = document.getElementsByClassName("tab");
        y = x[currentTab].getElementsByTagName("input");
        // A loop that checks every input field in the current tab:
        for (i = 0; i < y.length; i++) {
          // If a field is empty...
          if (y[i].value == "") {
            // add an "invalid" class to the field:
            y[i].className += " invalid";
            // and set the current valid status to false
            valid = false;
          }
        }
        // If the valid status is true, mark the step as finished and valid:
        if (valid) {
          document.getElementsByClassName("step")[currentTab].className +=
            " finish";
        }
        return valid; // return the valid status
      }

      function fixStepIndicator(n) {
        // This function removes the "active" class of all steps...
        var i,
          x = document.getElementsByClassName("step");
        for (i = 0; i < x.length; i++) {
          x[i].className = x[i].className.replace(" active", "");
        }
        //... and adds the "active" class on the current step:
        x[n].className += " active";
      }
    </script>
    <script language="javascript" type="text/javascript">
     
      var quality = 40; //(1 to 100) (recommanded minimum 55)
      var timeout = 10; 
          
        function Capture() {
          //alert('required');
          console.log("entry capture");
            try {
                      {% for i in "12345"%}
             // document.getElementById('txtStatus').value = "";
                document.getElementById('imgFinger').src = "";
            //    document.getElementById('txtImageInfo').value = "";
              //  document.getElementById('txtIsoTemplate').value = "";
                //document.getElementById('txtAnsiTemplate').value = "";
                //document.getElementById('txtIsoImage').value = "";
               if (document.getElementById('imgFinger').value ==0){
                 alert('no Finger print found');
                 Capture();
                
               }
            
                   console.log('loop   capture')

                var res = CaptureFinger(quality, timeout);
              //  alert('CaptureFinger called successfully');
                alert(res);
                if (res.httpStaus) {
                    if (res.data.ErrorCode == "0") {
                        document.getElementById('imgFinger').src = "data:image/bmp;base64," + res.data.BitmapData;
                        document.getElementById('imgFinger{{i}}').value=  res.data.IsoTemplate;
                        var s="data:image/bmp;base64,"+res.data.BitmapData;
                        sessionStorage.setItem('img{{i}}',s);
                        console.log("data: " +res.data.IsoTemplate)
                    }
                        else
                        {
                          alert('fingerprint is not obtined');
                        }
                    }
                  
                else {
                    alert (res.err,"error");
                }
                   {%  endfor %}
              
              }

            
            catch (e) {
                alert(e);
            }
             
            return  s;
            
        }
        function recall()
        {
          document.getElementById('imgFinger').src = "";
          
        }

     </script>

  </body>
</html>
